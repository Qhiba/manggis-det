<!DOCTYPE html>
<html>
    <head>
        <title>Camera Access</title>
        <style>
            .container {
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                text-align: center;
            }
            #video {
                width: 100%;
                max-width: 640px;
                margin-bottom: 20px;
            }
            #canvas {
                display: none;
            }
            .button {
                padding: 10px 20px;
                background-color: #4CAF50;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            .button:disabled {
                background-color: #cccccc;
                cursor: not-allowed;
            }
            .button.stop {
                background-color: #f44336;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Camera Access</h1>
            <video id="video" autoplay></video>
            <canvas id="canvas"></canvas>
            <div>
                <button id="startButton" class="button">Start Camera</button>
            </div>
        </div>

        <script>
            const video = document.getElementById('video')
            const canvas = document.getElementById('canvas')
            const startButton = document.getElementById('startButton')
            let stream = null;
            let isStreaming = false;

            const stopStream = () => {
                if (stream) {
                    stream.getTrack().forEach(track => {
                        track.stop()
                    });
                    video.srcObject = null;
                    stream = null;
                }
                isStreaming = false;
                startButton.textContent = 'Start Camera';
                startButton.classList.remove('stop');
            };

            const startStream = async () => {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({
                        video: true
                    });
                    video.srcObject = stream;
                    isStreaming = true;
                    start.textContent = 'Stop Camera';
                    startButton.classList.add('stop')
                } catch (err) {
                    console.error('Error accessing camera:', err);
                    alert('Error accessing camera. Please ensure you have given camera permission.');
                    stopStream();
                }
            };

            startButton.addEventListener('click', () => {
                if (isStreaming) {
                    stopStream();
                } else {
                    startStream();
                }
            });
        </script>
    </body>
</html>